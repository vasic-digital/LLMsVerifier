# Staging Configuration
environment: staging
debug: true
log_level: debug

server:
  host: 0.0.0.0
  port: 8080
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 60s
  tls:
    enabled: true
    cert_file: /etc/ssl/certs/staging.crt
    key_file: /etc/ssl/private/staging.key

database:
  driver: postgres
  host: ${DB_HOST:staging-db}
  port: ${DB_PORT:5432}
  database: ${DB_NAME:llm_verifier_staging}
  username: ${DB_USER:staging_user}
  password: ${DB_PASSWORD}
  ssl_mode: require
  max_connections: 50
  max_idle_time: 5m
  conn_max_lifetime: 1h

security:
  jwt_secret: ${JWT_SECRET}
  token_expiry: 8h
  refresh_token_expiry: 72h # 3 days
  max_login_attempts: 10
  lockout_duration: 10m
  session_timeout: 15m
  require_https: true
  rate_limiting:
    enabled: true
    requests: 200
    window: 1m
  cors:
    enabled: true
    allowed_origins:
      - "https://staging.yourdomain.com"
      - "https://staging-api.yourdomain.com"
    allowed_methods:
      - GET
      - POST
      - PUT
      - DELETE
      - OPTIONS
    allowed_headers:
      - Authorization
      - Content-Type
      - X-Tenant-ID
    exposed_headers:
      - X-Total-Count
    allow_credentials: true
    max_age: 86400

performance:
  max_workers: 25
  worker_timeout: 5m
  queue_size: 500
  enable_profiling: true
  enable_metrics: true
  memory_limit: 1073741824 # 1GB
  cpu_quota: 1

monitoring:
  enabled: true
  prometheus:
    enabled: true
    port: 9090
    path: /metrics
    namespace: llm_verifier_staging
  tracing:
    enabled: true
    provider: jaeger
    endpoint: http://jaeger-staging:14268/api/traces
    service: llm-verifier-staging
  logging:
    level: debug
    format: json
    output: file
    max_size: 50
    max_backups: 5
    max_age: 15
    compress: true

providers:
  default_provider: openai
  openai:
    api_key: ${OPENAI_API_KEY}
    base_url: https://api.openai.com/v1
    timeout: 30s
    max_tokens: 4096
    temperature: 0.7

enterprise:
  rbac:
    enabled: true
    default_role: user
    admin_role: admin
    super_admin_role: super_admin
  multi_tenant:
    enabled: true
    default_tenant: staging
    tenant_header: X-Tenant-ID
    isolation_mode: database
  ldap:
    enabled: false
  saml:
    enabled: false
  audit_logging:
    enabled: true
    storage: database
    retention: 720h # 30 days
    compression: true